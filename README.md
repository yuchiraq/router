# Go Reverse Proxy с Панелью Администратора

Этот проект представляет собой веб-сервер, написанный на Go, который функционирует как обратный прокси. Он включает в себя панель администратора для управления правилами маршрутизации, просмотра статистики и потоковой передачи логов в реальном времени.

## Как это работает

Сервер прослушивает порты 80 (HTTP) и 443 (HTTPS). Весь входящий трафик на порт 443 терминируется с использованием TLS-сертификатов, которые автоматически получаются от Let's Encrypt с помощью `autocert`.

Когда поступает запрос, он сопоставляется с правилами маршрутизации, хранящимися в `rules.json`. Если правило найдено, запрос проксируется на соответствующий внутренний сервис.

Панель администратора, доступная на порту 8162, позволяет добавлять и удалять правила маршрутизации. Она также отображает статистику в реальном времени, такую как использование памяти и количество запросов, и предоставляет возможность просмотра логов сервера через WebSocket.

## Возможности

- **Обратный прокси:** Маршрутизирует входящие HTTP и HTTPS-запросы к различным внутренним сервисам на основе настраиваемых правил.
- **Панель администратора:** Веб-интерфейс для:
  - Добавления и удаления правил маршрутизации.
  - Просмотра статистики сервера в реальном времени (например, использование памяти, количество запросов).
  - Потоковой передачи логов сервера через WebSockets.
- **Автоматический HTTPS:** Использует `autocert` для автоматического получения и обновления TLS-сертификатов от Let's Encrypt.
- **Безопасность:** Панель администратора защищена базовой аутентификацией.

## Начало работы

### Необходимые условия

- Go 1.24.0 или новее.
- Зарегистрированное доменное имя.

### Установка

1.  **Склонируйте репозиторий:**

    ```bash
    git clone https://github.com/ваш-логин/имя-вашего-репозитория.git
    cd имя-вашего-репозитория
    ```

2.  **Установите переменные окружения:**

    Создайте файл `.env` в корне проекта и добавьте следующее:

    ```
    ADMIN_USER=ваше_имя_пользователя_администратора
    ADMIN_PASS=ваш_пароль_администратора
    ```

3.  **Запустите сервер:**

    ```bash
    go run main.go
    ```

## Использование

- **Прокси:** Прокси-сервер работает на портах 80 (HTTP) и 443 (HTTPS).
- **Панель администратора:** Панель администратора доступна по адресу `http://localhost:8162`.

## Структура проекта

- `main.go`: Основная точка входа в приложение.
- `cmd/main.go`: Альтернативная основная точка входа.
- `internal/`: Содержит внутренние пакеты приложения.
  - `logstream/`: Потоковая передача логов через WebSocket.
  - `panel/`: Обработчики и шаблоны панели администратора.
  - `proxy/`: Логика обратного прокси.
  - `stats/`: Сбор статистики.
  - `storage/`: Хранилище правил маршрутизации.
- `go.mod`, `go.sum`: Файлы модулей Go.
- `GEMINI.md`: Правила AI для проекта.
